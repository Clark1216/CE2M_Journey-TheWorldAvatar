<html>

    <head>
        <title>DTVF v2.0.0</title>

        <!-- JS -->
        <script src='https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js'></script>
        <script src='https://api.mapbox.com/mapbox-gl-js/v2.3.0/mapbox-gl.js'></script>
        <script src='https://unpkg.com/@turf/turf@6/turf.min.js'></script>
        <script src="./dtvf.temp.js"></script>

        <!-- CSS -->
        <link href="https://api.tiles.mapbox.com/mapbox-gl-js/v2.3.0/mapbox-gl.css" rel="stylesheet" />
        <link href="./dtvf.min.css" rel="stylesheet" />

        <style>
            body, html, #map {
                width: 100%;
                height: 100%;
                margin: 0;
                padding: 0;
            }
        </style>
    </head>
    <body>
        <!-- Container the map will be added to -->
        <div id="map"></div>

        <!-- Element the map controls will be added to (normally on the left) -->
        <div id="controlsContainer"></div>

        <!-- Element for depth of field overlay -->
        <div id="tiltShift"></div>

        <script>
            // Create a new manager instance
            MapHandler.MAP_API = "pk.eyJ1IjoibWhpbGxtYW4iLCJhIjoiY2t1NW5wMDF3MnBzaDJ2cWhyZ2MxbHh4diJ9.TPv5CXdhGvFPkL28tTeXTA";
            var manager = new Manager(MapProvider.MAPBOX);

            // Load the definitions of sample data
            var dataPromise = manager.loadDataDirectory("./data-cambridge");
            dataPromise.then(() => {
                // Only start the map after data definitions have been read.
                start();
            });

            /**
             * 
             */
            function start() {
                // Create a map with default settings
                manager.initialiseMap();
                
                MapHandler.MAP.on("style.load", function() {
                    console.info("Map has loaded, proceeding to add data...");
                    
                    // Plot the default data group
                    manager.plotGroup();
                });
            }
          
        </script>
    </body>
</html>
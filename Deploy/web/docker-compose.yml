version: "3.8"

# Services
services:

  # Knowledge Graph Website
  website:
    image: docker.cmclinnovations.com/website:1.0.0-SNAPSHOT
    build: "./website"
    container_name: "website"
    restart: unless-stopped

  
  # nginx, configured as a reverse proxy for all externally-available web services
  reverse_proxy:
    image: docker.cmclinnovations.com/reverse_proxy:1.0.0-SNAPSHOT
    build:
      context: "./reverse_proxy"
      target: no_ssl
    container_name: "reverse_proxy"
    restart: always
  
  
  # JPS Chatbot
  # TODO - Once this has a version and has been tagged with it, use that rather than the commit
  jps-chatbot:
    image: docker.cmclinnovations.com/jps-chatbot:6c73b9ff4
    container_name: "jps-chatbot"
    restart: unless-stopped
    ports:
      - 5000:5000 
  
  
  # UK Power System
  # TODO - Once this has a version and has been tagged with it, use that rather than the commit
  uk-power-system:
    image: docker.cmclinnovations.com/uk-power-system:e1ce3d6
    container_name: "uk-power-system"
    restart: unless-stopped
    ports:
      - 3001:3001 
    
    
  # UK Gas Grid
  # TODO - Once this has a version and has been tagged with it, use that rather than the commit
  uk-gas-grid:
    image: docker.cmclinnovations.com/uk-gas-grid:b26a022
    container_name: "uk-gas-grid"
    restart: unless-stopped
    ports:
      - 4001:80
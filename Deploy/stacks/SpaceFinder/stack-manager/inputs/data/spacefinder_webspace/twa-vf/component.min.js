class DynamicComponent{constructor(e){this.id_container="dynamicInterfaceContainer",this.id_title="dynamicComponentTitle",this.id_content="dynamicContent",console.log("Rendering an additional custom UI component..."),this.container=createDiv({id:this.id_container}),this.container_content=createDiv({id:this.id_content}),this.container_title=createDiv({id:this.id_title}),this.container_title.textContent=e}render(e){this.container.appendChild(this.container_title),this.container.appendChild(this.container_content),e.appendChild(this.container)}}function createErrorMessageElement(e){var t=createDiv();return t.textContent=e,t.style.color="red",t.style.display="none",t}function createDiv(e){return createHTMLElement("div",e)}function createHTMLElement(e,t){e=document.createElement(e);return t&&(t.id&&(e.id=t.id),t.classes)&&e.classList.add(...t.classes),e}class AssetDisplayComponent extends DynamicComponent{constructor(e){super(e),this.container_title.addEventListener("click",()=>this.toggleContent()),this.container_content.style.height="0";let n=createDiv({classes:["asset-card-container"]}),i=1;this.createAssetMap().forEach((e,t)=>{this.createCardElement(n,t,e,i),i++}),this.container_content.appendChild(n)}toggleContent(){"0px"===this.container_content.style.height?(this.container_content.style.height="auto",this.container_content.style.opacity="1"):(this.container_content.style.height="0",this.container_content.style.opacity="0")}createAssetMap(){var e=new Map;return e.set("AXIperfect FXXL WB",["Monocrystalline","415 - 430 Wp","21.25 ~ 22.02%","154€","Axitec Energy","1722 x 1134 x 30 mm","21.8kg"]),e.set("Sonnex Energie Bifacial Dual Glass Black-NEX Series",["TOPCon","415 - 425 Wp","21.25 ~ 21.76%","168€","Sonnex Energie","1722 x 1134 x 30 mm","25.4kg"]),e.set("HERO M10-16BB N-Type Bifacial",["TOPCon","420 Wp","21.5%","105€","Solar Hero","1722 x 1134 x 30 mm","23.7kg"]),e.set("DGJMO-08",["PERC","395 - 415 Wp","20.23  21.25 % ","73€","Dr. Grob Energy","1722 x 1134 x 30 mm","24.5kg"]),e}createCardElement(e,t,n,i){var r=createDiv({classes:["asset-card"]}),a=createDiv({classes:["json-key","asset-card-line","line-item"]});a.style.borderBottom="1px solid #d3d3d3",a.style.paddingBottom="0.3em",a.textContent=i+") "+t,r.appendChild(a),this.genCardLine(r,"Type",n[0]),this.genCardLine(r,"Performance",n[1]),this.genCardLine(r,"Panel efficiency",n[2]),this.genCardLine(r,"Cost per module",n[3]),this.genCardLine(r,"Vendor",n[4]),this.genCardLine(r,"Dimensions (L x W x H)",n[5]),this.genCardLine(r,"Weight",n[6]),e.appendChild(r)}genCardLine(e,t,n){var i=createDiv({classes:["asset-card-line","line-item"]}),r=createHTMLElement("span",{classes:["empty-icon"]}),a=createHTMLElement("span",{classes:["json-key"]}),s=createHTMLElement("span",{classes:["json-separator"]}),o=createHTMLElement("span",{classes:["json-value"]});a.textContent=t,s.textContent=":",o.textContent=n,i.appendChild(r),i.appendChild(a),i.appendChild(s),i.appendChild(o),e.appendChild(i)}}class SeachEntityComponent extends DynamicComponent{constructor(e,t,n,i){super(e),this.numerical_placeholder_message="Type a number",this.baseStackUrl=t,this.initContainerAttributes();e=this.container_content;new SelectDropdownComponent("Zone Type").render(e);let r=new SearchTextInputComponent("Site Area [m2]",this.numerical_placeholder_message,"Invalid input. Please enter a numerical value.");r.render(e);t=createHTMLElement("button");t.textContent="Submit",t.addEventListener("click",()=>this.handleSubmit(n,i,[r])),e.appendChild(t)}render(e){this.container.appendChild(this.container_title),this.container.appendChild(this.container_content),e.insertBefore(this.container,e.firstChild)}initContainerAttributes(){this.container.id="searchContainer",this.container.classList.add("controlBlock"),this.container_title.id="controlTitle",this.container_title.classList.add("controlTitle"),this.container_content.removeAttribute("id"),this.container_content.classList.add("controlContents")}handleSubmit(t,n,e){t.setFilter(n,null);var i=this.retrieveSelectedOptions(this.container_content.firstElementChild),e=this.retrieveTextInput(e[0],!0);$.ajax({url:this.baseStackUrl+"/filter-agent/filter",type:"GET",data:{subs:`{"area":"${e}", "zonetype":"${i}"}`},success:function(e){e=e.slice(1,-1).split(", ");0<e[0].length&&t.setFilter(n,["in",["get","iri"],["literal",e]])},error:function(e){console.error("Error:",e)}})}retrieveSelectedOptions(e){let t=[];e.querySelectorAll('input[type="checkbox"]:checked').forEach(e=>{t.push(e.value)});let n="'null'";return 0<t.length&&(e=t.map(e=>`'${e}'`),n=e.join(",")),n}retrieveTextInput(e,t){let n=e.getCurrentValue();var i=/^\d+$/.test(n);return""===n?n="'null'":t&&!i&&(n="'null'",e.invokeError()),n}}class SearchTextInputComponent{constructor(e,t,n=""){this.container=createDiv();var i=createDiv();i.textContent=e,this.text_input_element=createHTMLElement("input"),this.text_input_element.type="text",this.text_input_element.placeholder=t,this.text_input_element.value="",this.container.appendChild(i),this.container.appendChild(this.text_input_element),0<n.length&&(this.error_message_element=createErrorMessageElement(n),this.container.appendChild(this.error_message_element))}getCurrentValue(){return this.text_input_element.value}invokeError(){this.error_message_element.style.display="block",console.log("Invalid Input: "+this.error_message_element.textContent),setTimeout(()=>{this.error_message_element.style.display="none"},5e3)}render(e){e.appendChild(this.container)}}class SelectDropdownComponent{constructor(t){this.option_index=1,this.container=createDiv();let n=createHTMLElement("button");n.textContent="Select "+t,this.dropdown_options_container=createDiv(),this.retrieveOptionValues().forEach(e=>{this.addOption(t,e.value,e.label)}),n.addEventListener("click",()=>{this.dropdown_options_container.style.display="block"}),document.addEventListener("click",e=>{n.contains(e.target)||this.dropdown_options_container.contains(e.target)||(this.dropdown_options_container.style.display="none")}),this.container.appendChild(n),this.container.appendChild(this.dropdown_options_container)}render(e){e.appendChild(this.container)}retrieveOptionValues(){return[{value:"Automiele",label:"Special Automeile Area"},{value:"Industry",label:"Industrial Area"}]}addOption(e,t,n){var e=e.trim().replace(/\s/g,"").toLowerCase()+this.option_index++,i=createHTMLElement("input"),t=(i.type="checkbox",i.id=e,i.value=t,createHTMLElement("label",{classes:["line-item"]}));t.htmlFor=e,t.appendChild(i),t.appendChild(document.createTextNode(n)),this.dropdown_options_container.appendChild(t)}}
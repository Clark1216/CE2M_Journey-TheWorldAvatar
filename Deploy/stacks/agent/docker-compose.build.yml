version: "3.8"


services:

  # Email Agent
  email-agent:
    image: docker.cmclinnovations.com/email-agent:1.0.0-SNAPSHOT
    build:
      context: "../"
      dockerfile: "./docker/Dockerfile"
    labels:
      description: "Simple servlet to accept requests and (where valid) forward to SMTP server."
      authors: "mdhillman@cmclinnovations.com"

  # Gas Grid Agent
  gas-grid-agent:
    image: docker.cmclinnovations.com/gas-grid-agent:1.0.0-SNAPSHOT
    build:
      context: "../../../GasGrid"
      dockerfile: "./docker/Dockerfile"
    labels:
      description: "Gas Grid Agent."
      authors: "support@cmclinnovations.com"
      builder: "${BUILDER}"
      hash: "${HASH}"

  # JPS Chatbot
  jps-chatbot:
    image: docker.cmclinnovations.com/jps-chatbot:1.0.0-SNAPSHOT
    build:
      context: "../../../JPS_Chatbot"
    labels:
      description: "Chemistry chatbot, uses NL processing and KGs to answer chemical queries."
      authors: "xz378@cam.ac.uk, support@cmclinnovations"
      builder: "${BUILDER}"
      hash: "${HASH}"

  # JPS LDF Server
  jps-ldf:
    image: docker.cmclinnovations.com/jps-ldf:1.0.0-SNAPSHOT
    build:
      context: "../../../JPS_LDF"
    labels:
      description: "Linked Fragment server used in conjunction with the JPS Chatbot Image."
      authors: "xz378@cam.ac.uk, support@cmclinnovations"
      builder: "${BUILDER}"
      hash: "${HASH}"

  # Kinetics Agent.
  kinetics-agent:
    image: "docker.cmclinnovations.com/kinetics-agent:0.0.1-SNAPSHOT"
    build: "./KineticsAgent"    
    labels:
       description: "Tomcat server hosting the KineticsAgent service."
       authors: "support@cmclinnovations.com"
       builder: "${BUILDER}"
       hash: "${HASH}"

  # Slurm compute node.
  # Note: This Image exists as a generic job queue/executor for any other
  #       services submitting Slurm jobs (such as the KineticsAgent).
  slurm:
    image: "docker.cmclinnovations.com/slurm:1.0.0-SNAPSHOT"
    labels:
       description: "Slurm compute node."
       authors: "support@cmclinnovations.com"
       builder: "${BUILDER}"
       hash: "${HASH}"
version: "3.8"


services:

  # Email Agent
  email-agent:
    image: docker.cmclinnovations.com/email-agent:1.0.0-SNAPSHOT
    build:
      context: "../"
      dockerfile: "./docker/Dockerfile"
    labels:
      authors: "mdhillman@cmclinnovations.com"
      description: "Simple servlet to accept requests and (where valid) forward to SMTP server."

  # Gas Grid Agent
  gas-grid-agent:
    image: docker.cmclinnovations.com/gas-grid-agent:1.0.0-SNAPSHOT
    build:
      context: "../../../GasGrid"
      dockerfile: "./docker/Dockerfile"
    labels:
      authors: "support@cmclinnovations.com"
      builder: "${BUILDER}"
      description: "Gas Grid Agent."
      hash: "${HASH}"

  # JPS Chatbot
  jps-chatbot:
    image: docker.cmclinnovations.com/jps-chatbot:1.0.0-SNAPSHOT
    build:
      context: "../../../JPS_Chatbot"
    labels:
      authors: "xz378@cam.ac.uk, support@cmclinnovations"
      builder: "${BUILDER}"
      description: "Chemistry chatbot, uses NL processing and KGs to answer chemical queries."
      hash: "${HASH}"

  # JPS LDF Server
  jps-ldf:
    image: docker.cmclinnovations.com/jps-ldf:1.0.0-SNAPSHOT
    build:
      context: "../../../JPS_LDF"
    labels:
      authors: "xz378@cam.ac.uk, support@cmclinnovations"
      builder: "${BUILDER}"
      description: "Linked Fragment server used in conjunction with the JPS Chatbot Image."
      hash: "${HASH}"

  # # Kinetics Agent.
  # kinetics-agent:
  #   image: "docker.cmclinnovations.com/kinetics-agent:0.0.1-SNAPSHOT"
  #   build: "./KineticsAgent"    
  #   labels:
  #      authors: "support@cmclinnovations.com"
  #      builder: "${BUILDER}"
  #      description: "Tomcat server hosting the KineticsAgent service."
  #      hash: "${HASH}"

  # # Slurm compute node.
  # # Note: This Image exists as a generic job queue/executor for any other
  # #       services submitting Slurm jobs (such as the KineticsAgent).
  # slurm:
  #   image: "docker.cmclinnovations.com/slurm:1.0.0-SNAPSHOT"
  #   build: "./Slurm"
  #   labels:
  #      authors: "support@cmclinnovations.com"
  #      builder: "${BUILDER}"
  #      description: "Slurm compute node."
  #      hash: "${HASH}"
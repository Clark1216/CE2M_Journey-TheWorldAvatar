# This configuration file should include all docker-compose options required to *build images* for
# services in the 'dafni' stack.
#
# When adding a new service, please copy the configuration for an existing service, then modify the
# service name, the 'image' tag (retaining 'docker.cmclinnovations.com') and the 'build/*',
# 'labels/authors' and 'labels/description' nodes.
# =================================================================================================

version: "3.8"


services:

  # Blazegraph geo (see db stack for config)
  blazegraph-geo:
    image: docker.cmclinnovations.com/blazegraph_geo:1.0.0-SNAPSHOT
    build:
      context: ../db/blazegraph_geo
      labels:
        authors: "msff2@cam.ac.uk, support@cmclinnovations"
        builder: "${BUILDER}"
        description: "Customised version of Blazegraph, optimised for particular geospatial queries. Based on the official Tomcat 9 image."
        hash: "${HASH}"

  # QGIS
  qgis:
    image: docker.cmclinnovations.com/qgis_with_ssh:release-3_20
    build:
      context: qgis
      labels:
        authors: "oparry@cmclinnovations, support@cmclinnovations"
        builder: "${BUILDER}"
        description: "Customised version of the QGIS image with an ssh server installed."
        hash: "${HASH}"
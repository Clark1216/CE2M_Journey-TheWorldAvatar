version: "3.8"

services:
  blazegraph_pw:
    container_name: "blazegraph_pw"
    image: docker.cmclinnovations.com/blazegraph:1.0.0-SNAPSHOT
    restart: unless-stopped
    pull_policy: if_not_present
    environment:
      BLAZEGRAPH_PASSWORD_FILE: /run/secrets/blazegraph_password
    ports:
      - "4999:8080"
    volumes:
      - blazegraph_pw:/data
    # Add a secret to set the password for BASIC authentication
    secrets:
      - blazegraph_password

volumes:
  blazegraph_pw:
    name: "blazegraph_pw"

# Secrets used to set runtime passwords
# details: https://docs.docker.com/compose/compose-file/#secrets
secrets:
  blazegraph_password:
    # Specify path to local password file
    file: ./secrets/bg_password
version: "3.8"

services:
  forecasting_agent:
    image: ghcr.io/cambridge-cares/forecasting_agent:1.0.0-SNAPSHOT
    environment:
      # Required environment variables for both Stack and "standalone" (i.e. outside stack) deployment
      - STACK_NAME=${STACK_NAME}    # to be left blank for "standalone" deployment
      # Additional environment variables required for Stack deployment
      # (can be left blank for "standalone" deployment)
      - NAMESPACE=readings          # Target Blazegraph namespace
      - DATABASE=postgres           # Target PostGIS/PostgreSQL database name
      # Additional environment variables required for "standalone deployment"
      # (can be left blank for Stack deployment)
      - DB_URL=
      - DB_USER=
      - DB_PASSWORD=
      - QUERY_ENDPOINT=
      - UPDATE_ENDPOINT=
    ports:
      - "5000:5000"
    volumes:
      - logs:/root/.jps
    configs:
      - blazegraph
      - postgis
    secrets:
      - postgis_password

volumes:
  logs:
    name: "logs"